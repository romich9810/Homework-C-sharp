using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace _4_2_SomeBar
{
    internal class Program
    {
        static void Main(string[] args)
        {
            int positionX = 0;
            int positionY = 0;
            int maxValueBar = 10;
            int percentOfBarByUser;

            Console.Write("Введите процент заполнения бара:");
            percentOfBarByUser = Convert.ToInt32(Console.ReadLine());
            Console.Clear();
            Console.SetCursorPosition(0, 5);

            DrawBar(maxValueBar, ref percentOfBarByUser, positionX, positionY, ConsoleColor.Red);
        }

        static void DrawBar (int maxValueBar, ref int percent,  int positionX,  int positionY, ConsoleColor color, char symbol = ' ')
        {
            int valueBar;
            bool isUncorrectPercent = true;

            ConsoleColor defaultColor = Console.BackgroundColor;
            string bar = "";

            valueBar = maxValueBar * percent / 100;
            // valueBar = Convert.ToInt32(Convert.ToSingle(maxValueBar) / 100 * Convert.ToSingle(percent)); - при данной конвертации идёт наиболее плавное 
            // заполнение бара

            while (isUncorrectPercent)
            {
                if (valueBar < 0 || valueBar > maxValueBar)
                {
                    Console.WriteLine("Неверное значение процента. Попробуйте ещё раз.");
                    Console.Write("Введите процент заполнения бара:");
                    percent = Convert.ToInt32(Console.ReadLine());
                }
                else
                {
                    isUncorrectPercent = false;
                }
            }

            for (int i = 0; i < valueBar; i++)
            {
                bar += symbol;
            }

            Console.SetCursorPosition(positionX, positionY);
            Console.Write('{');
            Console.BackgroundColor = color;
            Console.Write(bar);
            Console.BackgroundColor = defaultColor;

            bar = "";

            for (int i = valueBar; i < maxValueBar; i++)
            {
                bar += symbol;
            }

            Console.Write(bar + '}' + $" - {percent} % заполнено\n");;
        }
    }
}
